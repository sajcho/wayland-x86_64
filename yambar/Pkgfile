# Description:	yambar is a lightweight and configurable status panel (bar, for short) for X11 and Wayland
# URL:		https://codeberg.org/dnkl/yambar/
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	pulseaudio scdoc

name=yambar
version=1.10.0-41-gda19c09
_commit=da19c091222c0af48795db14550093786fa28b64
# Author: Delgan <delgan.py@gmail.com>
# Date:   Mon Apr 1 08:53:50 2024 +0000
release=1
source=()

build() {
	cd $SRC
	git clone https://codeberg.org/dnkl/yambar.git
	cd ${name}
	git reset --hard ${_commit}

	build-meson \
		-Dbackend-wayland=enabled \
		-Dplugin-pulse=enabled \
		-Dplugin-river=enabled \
		-Dbackend-x11=disabled \
		-Dplugin-mpd=disabled \
		-Dplugin-pipewire=disabled \
		. build

	meson compile ${JOBS:+-j ${JOBS}} -v -C build

	DESTDIR=$PKG meson install --no-rebuild -C build

	# Install example configuration
	install -D -m 0644 examples/configurations/*.conf \
		-t $PKG/usr/share/yambar/examples

	rm -r $PKG/usr/share/{doc,zsh}
}
